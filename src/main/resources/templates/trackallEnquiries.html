<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"lang="en">

<script type="text/javascript" th:src="@{/js/settings.js}"></script>
<script type="text/javascript" th:src="@{/js/app.js}"></script>
<link rel="stylesheet" type="text/css" th:href="@{/css/modern.css}" />
<script  src="https://www.googletagmanager.com/gtag/js?id=UA-120946860-7"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>


<style>


body {
	opacity: 0;
}
.uppercase {
  text-transform: uppercase;
}

#loading {
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  position: fixed;
  display: block;
  opacity: 0.7;
  background-color: #676565;
  z-index: 99;
  text-align: center;
}

#loading-image {
  position: absolute;
  top: 25%;
  left: 50%;
  z-index: 100;
}
</style>


<script>



	window.dataLayer = window.dataLayer || [];
	function gtag() {
		dataLayer.push(arguments);
	}
	 gtag('js', new Date());

	gtag('config', 'UA-120946860-7');
</script>
<head>
<meta charset="utf-8" />
<title>HRMS</title>
</head>
 
<body>

<div class="wrapper">
<nav id="sidebar" class="sidebar">
 <div th:replace="/fragments/sidebar :: div"></div>
 </nav>
 		
		<div class="main">
		<div th:replace="/fragments/header ::div"></div>
		<main class="content">
		<div class="container-fluid">

					<div class="header">
						<h1 class="header-title">
							Other 
						</h1>
						
					
					</div>
				
					<div class="row">
					
							<div class="col-12">
							<div class="card">
								<div class="card-header">
									<h5 class="card-title">Track all Enquiries  </h5>
								<div class="alert-outline">
									<div th:if="${message}" th:text="${message}" style="color: red">
									</div> 
									</div>	
								</div>
								<div class="card-body">
									<form id="validation-form" action="#" th:action="@{/saveTrackallEnquiries}" th:object="${LoanRequest}" method="post">
									<div class="form-row">
												
												<div class="form-group sm col-md-4">
											       <label class="form-label">EMP ENQ ID.
											     </label>
							                 <input  type="text"id="id"name="id" class="form-control"disabled="disabled">
										     </div>
												
												<div class="form-group sm col-md-4">
													<label class="form-label">Employee Name</label>
												<label style="color: red">*</label>
												<select class="form-control select2" name="empCode" id="empCode"  onchange="myFunctionEmpCode()" required aria-required="true">
												 <option value="">Select Employee</option>
												<option th:each="e :${listEmployee}"th:value="${e.getEmpCode()}" th:text="${e.getEmpName()}"></option>
											     	</select>

												</div>
										    	<div class="form-group sm col-md-4">
													<label class="form-label">Designation Code </label>
												<label style="color: red">*</label>
												<select class="form-control select2" name="designCode" id="designCode"  required aria-required="true">
												 <option value="">Select Employee</option>
												<option th:each="d :${listDesignation}"th:value="${d.getDesgCode()}" th:text="${d.getDesgName()}"></option>
											     	</select>

												</div>
										     
											
												
												
								</div>
									<div class="form-row">
									
										     <div class="form-group sm col-md-4">
													<label class="form-label">Category Code </label>
												<label style="color: red">*</label>
												<select class="form-control select2" name="categoryCode" id="categoryCode"  required aria-required="true">
												 <option value="">Select Employee</option>
												<option th:each="c :${listCategory}"th:value="${c.getCategoryCode()}" th:text="${c.getCategoryName()}"></option>
											     	</select>

												</div>
										
												<div class="form-group sm col-md-4">
												<label class="form-label">Present posting</label>
												<input  type="text"id="prsentPosting"name="prsentPosting" title="Designation"  class="form-control">
												</div>
												
															<div class="form-group sm col-md-4">
												<label class="form-label">Date Of Birth</label> 
												<input  type="text"id="dob"name="dob" title="Date Of Birth" class="form-control">
												</div>
												
												</div>
								    <div class="form-row">
									
											<div class="form-group sm col-md-4">
												<label class="form-label">DEPUTATION FILE NO</label>
												<input  type="text"id="depuFileNo"name="depuFileNo" title="depu File No"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
												<label class="form-label">DEPUTATION PERIOD</label>
												<input  type="text"id="deputationPeriod"name="deputationPeriod" title="Deputation Period"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
											       <label class="form-label">DEPUTATION DATE
											      </label>
							                 <input  type="text"id="deputationDate"name="deputationDate" title="DEPUTATION DATE" class="form-control">
										     </div>
												
												</div>
									<div class="form-row">
									
											<div class="form-group sm col-md-4">
												<label class="form-label">UNDER_RULE_7_FILE_NO</label>
												<input  type="text"id="underRule7FileNo"name="underRule7FileNo" title="depu File No"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
												<label class="form-label">UNDER_RULE_8_FILE_NO</label>
												<input  type="text"id="underRule8FileNo"name="underRule8FileNo" title="Deputation Period"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
											       <label class="form-label">UNDER_RULE_8_PERIOD
											      </label>
							                 <input  type="text"id="underRule8Period"name="underRule8Period" title="DEPUTATION DATE" class="form-control">
										     </div>
												
												</div>
									<div class="form-row">
									
											<div class="form-group sm col-md-4">
												<label class="form-label">UNDER_RULE_8_DATE</label>
												<input  type="text"id="underRule8Date"name="underRule8Date" title="under Rule8 Date"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
												<label class="form-label">VIGILANCE_INQ_FILE_NO</label>
												<input  type="text"id="vigilanceFileNo"name="vigilanceFileNo" title="vigilance File No"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
											       <label class="form-label">VIGILANCE_INQ_PERIOD
											      </label>
							                 <input  type="text"id="vigilanceInqPeriod"name="vigilanceInqPeriod" title="vigilance Inq Period" class="form-control">
										     </div>
												
												</div>			
					                <div class="form-row">
									
											<div class="form-group sm col-md-4">
												<label class="form-label">VIGILANCE_INQ_DATE</label>
												<input  type="text"id="vigilanceInqDate"name="vigilanceInqDate" title="vigilance Inq Date"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
												<label class="form-label">SUSPENTION_FILE_NO</label>
												<input  type="text"id="suspentionFileNo"name="suspentionFileNo" title="suspention File No"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
											       <label class="form-label">SUSPENTION_FILE_PERIOD
											      </label>
							                 <input  type="text"id="suspentionFilePeriod"name="suspentionFilePeriod" title="suspention File Period" class="form-control">
										     </div>
												
												</div>			
					                <div class="form-row">
									
											<div class="form-group sm col-md-4">
												<label class="form-label">SUSPENTION_FILE_DATE</label>
												<input  type="text"id="suspentionFileDate"name="suspentionFileDate" title="suspention File Date"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
												<label class="form-label">PROMOTION_FILE_NO</label>
												<input  type="text"id="promtionFileNo"name="promtionFileNo" title="promtion File No"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
											       <label class="form-label">PROMOTION_FILE_DATE
											      </label>
							                 <input  type="text"id="promtionFileDate"name="promtionFileDate" title="promtionFileDate" class="form-control">
										     </div>
												
												</div>			
					                <div class="form-row">
									
											<div class="form-group sm col-md-4">
												<label class="form-label">Acp File No</label>
												<input  type="text"id="acpFileNo"name="acpFileNo" title="Acp File No"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
												<label class="form-label">ACP_FILE_DATE</label>
												<input  type="text"id="acpFileDate"name="acpFileDate" title="Acp File Date"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
											       <label class="form-label">ARP_FILE_NO
											      </label>
							                 <input  type="text"id="arpFileNo"name="arpFileNo" title="Arp File No" class="form-control">
										     </div>
												
												</div>			
									<div class="form-row">
									
											<div class="form-group sm col-md-4">
												<label class="form-label">ARP_FILE_DATE</label>
												<input  type="text"id="arpFileDate"name="arpFileDate" title="arp File Date"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
												<label class="form-label">ACR_FILE_NO</label>
												<input  type="text"id="acrFileNo"name="acrFileNo" title="acr File No"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
											       <label class="form-label">ACR_FILE_DATE
											      </label>
							                 <input  type="text"id="acrFileDate"name="acrFileDate" title="acr File Date" class="form-control">
										     </div>
												
												</div>			
									<div class="form-row">
									
											<div class="form-group sm col-md-4">
												<label class="form-label">TRAINING_FILE_NO</label>
												<input  type="text" id="trainingFileNo" name="trainingFileNo" title="training File No"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
												<label class="form-label">TRAINING_FILE_DATE</label>
												<input  type="text" id="trainingFileDate" name="trainingFileDate" title="training File Date"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
											       <label class="form-label">LTC_FILE_NO
											      </label>
							                 <input  type="text" id="ltcFileNo" name="ltcFileNo" title="ltc File No" class="form-control">
										     </div>
											</div>			
									<div class="form-row">
									
											<div class="form-group sm col-md-4">
												<label class="form-label">LTC_FILE_DATE</label>
												<input  type="text" id="ltcFileDate" name="ltcFileDate" title="ltc File Date"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
												<label class="form-label">LEAVE_ACC_FILE_NO</label>
												<input  type="text" id="leaveAccFileNo" name="leaveAccFileNo" title="leave Acc FileNo"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
											       <label class="form-label">LEAVE_ACC_FILE_DATE
											      </label>
							                 <input  type="text" id="leaveAccFileDate" name="leaveAccFileDate" title="leave Acc File Date" class="form-control">
										     </div>
											</div>	
							    	<div class="form-row">
									
											<div class="form-group sm col-md-4">
												<label class="form-label">AWARD</label>
												<input  type="text" id="award" name="award" title="award"  class="form-control">
												</div>
												
												<div class="form-group sm col-md-4">
												<label class="form-label">AWARD_DATE</label>
												<input  type="text" id="awardDate" name="awardDate" title="Award Date"  class="form-control">
												</div>
												
												
											</div>	
										
										<!-- <div class="form-row">
										<div class="form-group sm col-md-4">
												<label class="form-label">Amount Required
												 <span class="text-danger">*</span></label> 
								 <input type="text" id="amountRequired" name="amountRequired" maxlength="15" class="form-control"oninvalid="this.setCustomValidity('Please Enter Amount Required')"
 oninput="setCustomValidity('')" required aria-required="true">
											</div>
											
										<div class="form-group sm col-md-4">
												<label class="form-label">Loan(To be Return In) 
												 <span class="text-danger">*</span></label> 
												 <input type="text" id="amountSanctioned" maxlength="12" name="amountSanctioned" class="form-control" title="loan to be return"oninvalid="this.setCustomValidity('Please Enter Loan(To be Return In)')"
 oninput="setCustomValidity('')"  required aria-required="true">
											</div>
											
											<div class="form-group sm col-md-4">
											       <label class="form-label">Status
											      </label>
												<select class="form-control required"
																		name="loanStatus" id="loanStatus">
																			<option value="">Select Type</option>
																			<option th:Value="Y">Approved </option>
																			<option selected="selected" th:Value="N ">Un Approved </option>
																			
																	</select>
												
												</div>
										
										</div> -->
										
										
							<button type="submit" class="btn btn-primary">Save</button>
								 <button type="reset"class="btn btn-primary" value="Reset">Reset</button>
						     
						      </form>
						      </div>
						  
	                      </div>
	                        
	                </div>   
	                
	                
	                  	<div class="col-12">
							<div class="card">
								<div class="card-header">
								</div>
								<div class="card-body">
									<!-- <table id="example" class="table table-striped display" style="width:100%"aria-describedby="example">
										<thead>
											<tr>
												<th scope="col">Application No</th>
												<th scope="col">Employee Name </th>
												<th scope="col">Application Date </th>
												<th scope="col">Loan Name </th>
												<th scope="col">Amount Required</th>
												<th scope="col">Action</th>
											</tr>
										</thead>
										<tbody>
											<tr  th:each="listLoanReq : ${listloanApplication}">
												<td th:text="${listLoanReq.appNo}"></td>
												
												<td th:text="${listLoanReq?.empCode?.empName}"></td>
												<td th:text="${#dates.format(listLoanReq.appDate,'dd-MM-yyyy')}"></td>
												<td th:text="${listLoanReq.loanCode.loanName}"></td>
												<td th:text="${listLoanReq.amountRequired}"></td>
												
												<td>
												
												<th:block th:switch="${listLoanReq.approvalStatus}">
												<div th:case="'N'">
												<a th:href="@{/editLoanRequest/{id}(id=${listLoanReq.appNo})}"><em class="fa fa-edit"></em></a>
												<a th:href="@{/deleteLoanRequest/{id}(id=${listLoanReq.appNo})}" onclick="return confirm('Are you sure?')"><em class="fa fa-times"></em></a>
												</div>
												
												<div th:case="'Y'">
												<a th:href="@{/deleteLoanRequest/{id}(id=${listLoanReq.appNo})}" onclick="return confirm('Are you sure?')"><em class="fa fa-times"></em></a>
												</div>
												</th:block>
												</td>
												
											</tr> 
										</tbody>
									
									</table> -->
								</div>
								
							</div>
						</div>
	                
	                
	                
	                
					</div>

				</div>
		</main>
		<footer class="footer">
		<div th:replace="/fragments/footer :: div"></div>
		</footer>
		</div>
		</div>
		
		<script>
	$(document).ready(function() {
		
		 $('#example').DataTable( {
		      
		        "scrollX": true,
		        deferRender:true,
	            scrollCollapse: true,
	            
		    } );

	$("input[name='dob']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
		
	});
	$("input[name='deputationDate']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
		
	});
	$("input[name='underRule8Period']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
		
	});
	$("input[name='underRule8Date']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
		
	});
	$("input[name='vigilanceInqPeriod']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
		
	});
	$("input[name='vigilanceInqDate']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
		
	});
	
	$("input[name='suspentionFilePeriod']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
	});
	$("input[name='suspentionFileDate']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
		
	});
	$("input[name='promtionFileDate']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
		
	});
	$("input[name='acpFileDate']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
		
	});

	$("input[name='arpFileDate']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
	});
	$("input[name='acrFileDate']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
	});
	
	$("input[name='trainingFileDate']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
		
	});
	$("input[name='ltcFileDate']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
		
	});
	$("input[name='leaveAccFileDate']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
		
	});
	
	$("input[name='awardDate']").datepicker({
		singleDatePicker: true,
		 format: 'yyyy/mm/dd',
	});
	
	});

	</script>
		
		
	<script>
		$(function() {

		


			
			// Datatables basic
			$('#datatables-basic').DataTable({
				responsive: true
			});
			// Datatables with Buttons
			var datatablesButtons = $('#datatables-buttons').DataTable({
				  deferRender:true,
		            scrollCollapse: true,
		            scroller: false,
				   responsive: true,
				   lengthMenu :[[10,20,30,-1 ],['10 rows', '20 rows', '30 rows', 'Show all' ] ],
					buttons :[]
			});
			datatablesButtons.buttons().container().appendTo("#datatables-buttons_wrapper .col-md-6:eq(0)")
		});
		
	</script>
	
		
<script>
	function myFunctionEmpCode(){
/* 		 var empCode= $('#empCode option:selected').value; */
		 var empCode= document.getElementById('empCode').value
	    console.log("ajax request : "+ empCode);
	    const xhr = new XMLHttpRequest();
	    xhr.open('GET','./viewEmployeeDetailsLoan/'+empCode,true);
	    xhr.getResponseHeader('content-type','application/json');
	    xhr.onload = function(){
	        if(this.status===200){
	            let obj = JSON.parse(this.responseText);
	            console.log(obj);
	            $('#empName').val(obj.empName);
	            $('#deptName').val(obj.deptName);
	            $('#desgName').val(obj.desgName);
	            $('#empPayCode').val(obj.empPayCode);
	        }
	        else{
	            console.error("some error occured");
	        }
		
	    }
	    xhr.send();
	}



	
	</script>



<script>
 function myFunctionCity(){
   $('#cityCode').click(function() {
      	 var name= $('#cityCode option:selected').text();
      	$('#district').val(name);
      	}); 
      }
      
</script>



	<script>
		$('#loading').show();
		$.ajax({
			// Other ajax parameters
			success : function() {
				// hiding the image here
				debugger;
				$('#loading').hide();
			}
		});
	</script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>


</body>
</html>